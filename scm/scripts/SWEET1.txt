//-------------Mission 13---------------
// Originally: Tagging Up Turf

:SWEET1
script_name 'SWEET1'
Coop.EnableSyncingThisScript()

gosub @SWEET1_468
if 
  has_deatharrest_been_executed 
goto_if_false @SWEET1_38
gosub @SWEET1_14575

:SWEET1_38
gosub @SWEET1_14838
terminate_this_script 
Char.ClearTasks($scplayer)

:SWEET1_52
switch_start $sweet1_chat_switch total_jumps 2 default_jump 0 @SWEET1_431 jumps 0 @SWEET1_115 1 @SWEET1_249 -1 @SWEET1_431 -1 @SWEET1_431 -1 @SWEET1_431 -1 @SWEET1_431 -1 @SWEET1_431

:SWEET1_115
set_var_text_label s$sweet1_chat[0] = 'SWE1_AA'
set_var_text_label s$sweet1_chat[1] = 'SWE1_AB'
set_var_text_label s$sweet1_chat[2] = 'SWE1_AC'
set_var_text_label s$sweet1_chat[3] = 'SWE1_AD'
set_var_text_label s$sweet1_chat[4] = 'SWE1_AE'
set_var_int_to_constant $sweet1_audio_chat[0] = 37400
set_var_int_to_constant $sweet1_audio_chat[1] = 37401
set_var_int_to_constant $sweet1_audio_chat[2] = 37402
set_var_int_to_constant $sweet1_audio_chat[3] = 37403
set_var_int_to_constant $sweet1_audio_chat[4] = 37404
48@ = 4
goto @SWEET1_431

:SWEET1_249
set_var_text_label s$sweet1_chat[0] = 'SWE1_BN'
set_var_text_label s$sweet1_chat[1] = 'SWE1_BO'
set_var_text_label s$sweet1_chat[2] = 'SWE1_BP'
set_var_text_label s$sweet1_chat[3] = 'SWE1_BQ'
set_var_text_label s$sweet1_chat[4] = 'SWE1_BX'
set_var_text_label s$sweet1_chat[5] = 'SWE1_BT'
set_var_text_label s$sweet1_chat[6] = 'SWE1_BU'
set_var_int_to_constant $sweet1_audio_chat[0] = 37435
set_var_int_to_constant $sweet1_audio_chat[1] = 37436
set_var_int_to_constant $sweet1_audio_chat[2] = 37437
set_var_int_to_constant $sweet1_audio_chat[3] = 37438
set_var_int_to_constant $sweet1_audio_chat[4] = 37443
set_var_int_to_constant $sweet1_audio_chat[5] = 37441
set_var_int_to_constant $sweet1_audio_chat[6] = 37442
48@ = 6
goto @SWEET1_431

:SWEET1_431
return 
goto @SWEET1_468
$spray_can_pickup = Pickup.CreateWithAmmo(365, 15, 1000, 2493.52, -1700.83, 14.27)

:SWEET1_468
Stat.RegisterMissionGiven
$NETWORK_PLAYER[0], $NETWORK_PLAYER[1], $NETWORK_PLAYER[2] = Coop.CollectNetworkPlayersForTheMission()
$onmission = 1
wait 0
Text.LoadMissionText('SWEET1')
World.ClearArea(1, 2527.9, -1667.7, 14.1, 10.0)
World.ClearArea(1, $ryder_carX, $ryder_carY, $ryder_carZ, 10.0)
Cutscene.Load('SWEET1A')

:SWEET1_527
if 
  not Cutscene.HasLoaded
goto_if_false @SWEET1_551
wait 0
goto @SWEET1_527

:SWEET1_551
Cutscene.Start
Camera.DoFade(1, 1000)

:SWEET1_560
if 
  not Cutscene.HasFinished
goto_if_false @SWEET1_584
wait 0
goto @SWEET1_560

:SWEET1_584
Player.SetControl($player1, False)
Camera.DoFade(0, Fade.Out)

:SWEET1_597
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_621
wait 0
goto @SWEET1_597

:SWEET1_621
Cutscene.Clear
49@ = 0
50@ = 0
51@ = 0
52@ = 0
53@ = 0
35@ = 0
63@ = 0
71@ = 0
69@ = 0
61@ = 0
34@ = 0
57@ = 0
46@ = 0
58@ = 0
73@ = 0
74@ = 0
75@ = 0
76@ = 0
36@ = 0
38@ = 0
39@ = 0
40@ = 0
$get_in_counter_swee1 = 0
88@ = 2038.758
89@ = -1624.419
90@ = 2074.503
91@ = -1662.767
92@ = 2345.68
93@ = -1515.79
94@ = 2423.7
95@ = -1393.28
84@ = 2401.6
85@ = -1550.8
86@ = 2396.33
87@ = -1555.12
96@ = 2100.972
97@ = -1646.623
98@ = 2105.264
99@ = -1656.712
Zone.SetGangStrength('IWD1', GangType.Ballas, 10)
Zone.SetGangStrength('IWD2', GangType.Ballas, 10)
Zone.SetGangStrength('IWD3A', GangType.Ballas, 10)
Zone.SetGangStrength('IWD3B', GangType.Ballas, 10)
Zone.SetGangStrength('IWD4', GangType.Ballas, 10)
Zone.SetGangStrength('IWD5', GangType.Ballas, 10)
Zone.SetGangStrength('ELS1A', GangType.Ballas, 10)
Zone.SetGangStrength('ELS1B', GangType.Ballas, 10)
Zone.SetGangStrength('ELS2', GangType.Ballas, 10)
Zone.SetGangStrength('ELS3A', GangType.Ballas, 10)
Zone.SetGangStrength('ELS3B', GangType.Ballas, 10)
Zone.SetGangStrength('ELS4', GangType.Ballas, 10)
Streaming.LoadSpecialCharacter('SWEET', 1)
Streaming.LoadSpecialCharacter('SMOKE', 10)
Streaming.RequestModel(365)
Streaming.RequestModel(492)
Streaming.RequestModel(102)
Streaming.RequestModel(103)
Streaming.LoadAllModelsNow

:SWEET1_1170
if or
  not Streaming.HasSpecialCharacterLoaded(1)
  not Streaming.HasSpecialCharacterLoaded(10)
goto_if_false @SWEET1_1200
wait 0
goto @SWEET1_1170

:SWEET1_1200
if or
  not Streaming.HasModelLoaded(365)
  not Streaming.HasModelLoaded(492)
  not Streaming.HasModelLoaded(102)
  not Streaming.HasModelLoaded(103)
goto_if_false @SWEET1_1240
wait 0
goto @SWEET1_1200

:SWEET1_1240
$sweet1_index = 0
$sweet1_audio_is_playing = 0
$sweet1_cutscene_flag = 0
$sweet1_chat_switch = 0
gosub @SWEET1_52
Char.SetCoordinates($scplayer, 2516.53, -1671.37, 12.88)
Char.SetHeading($scplayer, 61.28)
Char.GiveWeapon($scplayer, WeaponType.SprayCan, 30000)
Char.SetCurrentWeapon($scplayer, WeaponType.SprayCan)

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Char.GiveWeapon($NETWORK_PLAYER[$temp_int], WeaponType.SprayCan, 30000)
        Char.SetCurrentWeapon($NETWORK_PLAYER[$temp_int], WeaponType.SprayCan)
    end
end

///

if 
    Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[0])
then
    Char.SetCoordinates($NETWORK_PLAYER[0], 2514.73, -1667.61, 13.56)
    Char.SetHeading($NETWORK_PLAYER[0], 93.72)
end

if 
    Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[1])
then
    Char.SetCoordinates($NETWORK_PLAYER[1], 2514.50, -1665.78, 13.58)
    Char.SetHeading($NETWORK_PLAYER[1], 102.62)
end

if 
    Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[2])
then
    Char.SetCoordinates($NETWORK_PLAYER[2], 2514.08, -1663.51, 13.60)
    Char.SetHeading($NETWORK_PLAYER[2], 126.37)
end

///

Car.CustomPlateForNextCar(492, "GROVE4L_")
$sweet_car = Car.Create(492, 2508.16, -1666.47, 13.0)
Car.CustomPlateForNextCar(600, "_SHERM__")
$ryder_car = Car.Create(600, $ryder_carX, $ryder_carY, $ryder_carZ)

$sweet = Char.Create(24, 290, 2518.07, -1668.82, 12.85)
$big_smoke = Char.Create(24, 299, 2520.1, -1669.58, 13.1)

// SWEET'S CAR
$temp_int = Coop.GetVehicleNetworkId($sweet_car)
while $temp_int == -1
    wait 0
    $temp_int = Coop.GetVehicleNetworkId($sweet_car)
end

// SWEET
$temp_int = Coop.GetPedNetworkId($sweet)
while $temp_int == -1
    wait 0
    $temp_int = Coop.GetPedNetworkId($sweet)
end

// BIG SMOKE
$temp_int = Coop.GetPedNetworkId($big_smoke)
while $temp_int == -1
    wait 0
    $temp_int = Coop.GetPedNetworkId($big_smoke)
end

// RYDER'S CAR
$temp_int = Coop.GetVehicleNetworkId($ryder_car)
while $temp_int == -1
    wait 0
    $temp_int = Coop.GetVehicleNetworkId($ryder_car)
end

///

Car.ChangeColor($ryder_car, 84, 84)
Car.SetHeading($ryder_car, 0.0)

Char.SetAnimGroup($sweet, "GANG2")
Char.SetHeading($sweet, 103.76)
72@ = DecisionMakerChar.Load(DecisionMakerType.Empty)
Char.SetDecisionMaker($sweet, 72@)
Char.SetNeverTargeted($sweet, True)
Char.GiveWeapon($sweet, WeaponType.SprayCan, 30000)
Char.SetCurrentWeapon($sweet, WeaponType.SprayCan)
Char.SetSuffersCriticalHits($sweet, False)
Char.SetHealth($sweet, 500)
Char.SetMaxHealth($sweet, 500)
Char.SetCantBeDraggedOut($sweet, True)
Char.SetStayInCarWhenJacked($sweet, True)
Char.SetGetOutUpsideDownCar($sweet, False)
CarGenerator.Switch($gen_car6, 0)
CarGenerator.Switch($gen_car7, 0)
World.ClearArea(1, 2518.07, -1668.82, 12.85, 10.0)
Car.SetCanBurstTires($sweet_car, False)
Car.ChangeColor($sweet_car, 59, 34)
Car.SetHeading($sweet_car, 16.0)
56@ = Blip.AddForCar($sweet_car)
Blip.SetAsFriendly(56@, True)
Audio.SetRadioChannel(RadioChannel.BounceFM)
Char.SetAnimGroup($big_smoke, "FATMAN")
Char.SetHeading($big_smoke, 173.99)
Task.GoStraightToCoord($big_smoke, 2518.509, -1676.124, 13.3855, MoveState.Walk, 10000)
World.SetTagStatusInArea(88@, 89@, 90@, 91@, 0)
World.SetTagStatusInArea(92@, 93@, 94@, 95@, 0)
World.SetTagStatusInArea(84@, 85@, 86@, 87@, 0)
World.SetTagStatusInArea(96@, 97@, 98@, 99@, 0)
$tag_percentage = World.GetPercentageTaggedInArea(89@, 90@, 91@, 88@)
Hud.SwitchWidescreen(True)
Player.SetControl($player1, False)
World.ClearArea(1, 2518.07, -1668.82, 12.85, 40.0)
Camera.SetNearClip(0.2)
Camera.SetFixedPosition(2512.01, -1671.207, 14.2722, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2512.938, -1670.842, 14.1948, SwitchType.JumpCut)
Streaming.LoadScene(2515.42, -1671.19, 14.46)
Task.GoStraightToCoord($sweet, 2513.812, -1669.527, 12.5348, MoveState.Walk, 10000)
Task.GoStraightToCoord($scplayer, 2512.64, -1671.07, 12.5, MoveState.Walk, 10000)
Camera.DoFade(1, 500)

:SWEET1_1887
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_1911
wait 0
goto @SWEET1_1887

:SWEET1_1911
36@ = 0
skip_cutscene_start_internal @SWEET1_2723

:SWEET1_1925
if 
  $sweet1_index <> 1
goto_if_false @SWEET1_2052
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_2045
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_2045
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2038
Char.ClearLookAt($scplayer)
Char.ClearLookAt($sweet)
Task.LookAtChar($scplayer, $sweet, 8000)
Task.LookAtChar($sweet, $scplayer, 8000)

:SWEET1_2038
$sweet1_cutscene_flag = 1

:SWEET1_2045
goto @SWEET1_1925

:SWEET1_2052
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2076
Task.TurnCharToFaceChar($scplayer, $sweet)

:SWEET1_2076
World.ClearArea(1, 2512.26, -1667.83, 12.56, 30.0)
Camera.ResetNewScriptables
Camera.PersistTrack(True)
Camera.PersistPos(True)
Camera.SetVectorMove(2523.417, -1664.991, 15.1254, 2522.961, -1667.46, 15.2254, 13000, True)
Camera.SetVectorTrack(2513.695, -1670.609, 13.8556, 2514.297, -1669.343, 13.9372, 13000, True)

:SWEET1_2184
if 
  $sweet1_index <> 2
goto_if_false @SWEET1_2279
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_2272
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_2272
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2265

:SWEET1_2265
$sweet1_cutscene_flag = 1

:SWEET1_2272
goto @SWEET1_2184

:SWEET1_2279
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2295

:SWEET1_2295
if 
  $sweet1_index <> 3
goto_if_false @SWEET1_2427
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_2420
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_2420
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2413
Task.PlayAnim($sweet, "IDLE_CHAT", "PED", 4.0, True, False, False, False, 6000)

:SWEET1_2413
$sweet1_cutscene_flag = 1

:SWEET1_2420
goto @SWEET1_2295

:SWEET1_2427
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2443

:SWEET1_2443
if 
  $sweet1_index <> 4
goto_if_false @SWEET1_2538
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_2531
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_2531
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2524

:SWEET1_2524
$sweet1_cutscene_flag = 1

:SWEET1_2531
goto @SWEET1_2443

:SWEET1_2538
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2554

:SWEET1_2554
if 
  $sweet1_index <> 5
goto_if_false @SWEET1_2711
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_2704
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_2704
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2697
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_2697
Char.SetNextDesiredMoveState(MoveState.Walk)
Task.GoStraightToCoord($scplayer, 2510.271, -1669.803, 12.4092, MoveState.Walk, 10000)
Char.SetNextDesiredMoveState(MoveState.Walk)
Task.EnterCarAsPassenger($sweet, $sweet_car, 0, 20000)

:SWEET1_2697
$sweet1_cutscene_flag = 1

:SWEET1_2704
goto @SWEET1_2554

:SWEET1_2711
wait 1000
36@ = 1

:SWEET1_2723
skip_cutscene_end 
Audio.ClearMissionAudio(MissionAudioSlot.Slot1)
Audio.ClearMissionAudio(MissionAudioSlot.Slot2)
Char.Delete($big_smoke)
Streaming.UnloadSpecialCharacter(10)
62@ = Blip.AddForCoord(2089.01, -1649.08, 12.8)
Blip.Remove(62@)
if 
  36@ == 0
goto_if_false @SWEET1_2933
Char.SetCoordinates($scplayer, 2511.68, -1670.33, 12.46)
Char.SetHeading($scplayer, 62.36)
Char.ClearLookAt($scplayer)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_2933
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_2933
World.ClearArea(1, 2510.05, -1666.61, 12.57, 1.0)
Char.SetCoordinates($sweet, 2510.05, -1666.61, 12.57)
Char.SetHeading($sweet, 53.89)
Char.ClearLookAt($sweet)
Char.ClearTasksImmediately($sweet)
Char.SetNextDesiredMoveState(MoveState.Walk)
Task.EnterCarAsPassenger($sweet, $sweet_car, 0, 20000)

:SWEET1_2933
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_3003
World.ClearArea(1, 2510.05, -1666.61, 12.57, 1.0)
Char.SetCoordinates($sweet, 2510.05, -1666.61, 12.57)
Char.SetHeading($sweet, 53.89)

:SWEET1_3003
Char.ClearTasks($scplayer)
Camera.ResetNewScriptables
Camera.SetBehindPlayer
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut

Text.PrintNow('SWE1_A', 7000, 1)
for $temp_int = 0 to 1 // include 2 network players only
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_A', 7000, 1, $NETWORK_PLAYER[$temp_int]) // Get in Sweets Car
        Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $sweet_car, true, BlipDisplay.Both, BlipColor.Purple, 3)
    end
end

if  // the 3rd network player
    Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[2])
then
    Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[2], $ryder_car, true, BlipDisplay.Both, BlipColor.Purple, 3)
end

45@ = 0
$blob_flag = 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_3094

Text.PrintNow('SWE1_Q', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_Q', 7000, 1, $NETWORK_PLAYER[$temp_int]) //~r~You destroyed Sweets ride!
    end
end

goto @SWEET1_14575

:SWEET1_3094

206@ = 0
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if
            not Char.LocateAnyMeans3D($NETWORK_PLAYER[$temp_int], 0, 2089.01, -1649.08, 12.54, 10.0, 10.0, 10.0)
        then
            206@ = 1
        end
    end
end

if or
  not Car.Locate3D($sweet_car, $blob_flag, 2089.01, -1649.08, 12.54, 4.0, 4.0, 4.0)
  not Char.IsSittingInCar($scplayer, $sweet_car)
  not Car.IsOnAllWheels($sweet_car)
  206@ <> 0
goto_if_false @SWEET1_3618
wait 0
if 
is_ps2_keyboard_key_pressed 83
goto_if_false @SWEET1_3182
goto @SWEET1_14682

:SWEET1_3182
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_3221
Text.PrintNow('SWE1_P', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_P', 10000, 1, $NETWORK_PLAYER[$temp_int]) //~r~Sweet is dead!
    end
end

goto @SWEET1_14575

:SWEET1_3221
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_3262
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_3262
if 
    Car.IsDead($sweet_car)
then
    Text.PrintNow('SWE1_Q', 10000, 1)
    for $temp_int = 0 to 2
        if 
            Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
        then
            Coop.PrintNowForNetworkPlayer('SWE1_Q', 7000, 1, $NETWORK_PLAYER[$temp_int]) //~r~You destroyed Sweets ride!
        end
    end
else
    // === LOCAL PLAYER
    if 
        Char.IsInCar($scplayer, $sweet_car)
    then //goto_if_false @SWEET1_3412
        if 
            34@ == 0 // sweet_car_blip_removed
        then
            Blip.Remove(56@)
            Blip.Remove(62@)
            62@ = Blip.AddForCoord(2089.01, -1649.08, 12.8)
            Text.PrintNow('HOOD3_A', 5000, 1) // ~s~Drive with Sweet to ~y~Idlewood~s~.
            $blob_flag = 1
            34@ = 1 // sweet_car_blip_removed
        end
    else
        if 
            34@ == 1 // sweet_car_blip_removed
        then
            Blip.Remove(56@)
            Blip.Remove(62@)
            56@ = Blip.AddForCar($sweet_car)
            Blip.SetAsFriendly(56@, True)
            gosub @SWEET1_15166 // get_back_in_the_car
            Text.PrintNow('SWE1_S', 5000, 1) //~s~Get back in ~b~Sweets car!
            $blob_flag = 0
            34@ = 0 // sweet_car_blip_removed
        end
    end
    
    /// === NETWORK PLAYERS
    
    for $temp_int = 0 to 2
        if 
            Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
        then
            if 
                $temp_int == 2 // the 3rd player
            then
                if Car.IsDead($ryder_car)
                then
                    203@ = -1
                else
                    008B: 203@ = $ryder_car
                end

            else
                008B: 203@ = $sweet_car
            end

            if 
                Char.IsInCar($NETWORK_PLAYER[$temp_int], 203@)
            then
                if 
                    200@($temp_int, 3i) == 0 // sweet_car_blip_removed
                then
                    if 203@ <> -1
                    then
                        Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@)
                    end

                    Coop.UpdateCheckpointForNetworkPlayer(2089.01, -1649.08, 12.8, 4.0, 4.0, 4.0, $NETWORK_PLAYER[$temp_int])
                    Coop.PrintNowForNetworkPlayer('HOOD3_A', 5000, 1, $NETWORK_PLAYER[$temp_int]) // ~s~Drive with Sweet to ~y~Idlewood~s~.
                    200@($temp_int, 3i) = 1 // sweet_car_blip_removed
                end
            else
                if 
                    200@($temp_int, 3i) == 1 // sweet_car_blip_removed
                then
                    if 203@ <> -1
                    then
                        Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@, true, BlipDisplay.Both, BlipColor.Purple, 3)
                    end

                    Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
                    Coop.PrintNowForNetworkPlayer('SWE1_S', 5000, 1, $NETWORK_PLAYER[$temp_int]) //~s~Get back in ~b~Sweets car!
                    200@($temp_int, 3i) = 0 // sweet_car_blip_removed
                end
            end
        end
    end
end

:SWEET1_3492
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_3531
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_3531
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_3572
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_3572
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_3611
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_3611
goto @SWEET1_3094

:SWEET1_3618

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
        if 
            $temp_int == 2 // the 3rd player
        then
            if not Car.IsDead($ryder_car)
            then
                Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $ryder_car)
            end
        else
            Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $sweet_car)
        end
    end
end

Player.SetControl($player1, False)
Camera.SetFixedPosition(2082.533, -1650.244, 14.8007, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2083.515, -1650.202, 14.6181, SwitchType.JumpCut)
Streaming.RequestAnimation("GRAFFITI")
78@, 79@, 80@ = World.GetNearestTagPosition(2100.84, -1648.71, 12.42)
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_3787
66@ = Sequence.Open()
Task.LeaveCar(-1, $sweet_car)
Task.GoStraightToCoord(-1, 2100.48, -1649.14, 12.47, MoveState.Walk, 20000)
Task.ShootAtCoord(-1, 78@, 79@, 80@, 15000)
Sequence.Close(66@)

:SWEET1_3787
World.SetTagStatusInArea(88@, 89@, 90@, 91@, 0)
World.SetTagStatusInArea(96@, 97@, 98@, 99@, 0)
$tag_percentage = World.GetPercentageTaggedInArea(89@, 90@, 91@, 88@)
Char.SetAccuracy($sweet, 90)
Char.SetShootRate($sweet, 100)
69@ = 0
Hud.SwitchWidescreen(True)

if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_3901
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_3901
Task.LeaveCar($sweet, $sweet_car)

:SWEET1_3901
wait 600
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_3930
Task.LeaveCar($scplayer, $sweet_car)

:SWEET1_3930

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        wait 100
        if 
            Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
        then
            Task.LeaveAnyCar($NETWORK_PLAYER[$temp_int])
        end
    end
end

wait 500
Camera.DoFade(0, 1000)

:SWEET1_3942
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_3966
wait 0
goto @SWEET1_3942

:SWEET1_3966
if 
  not Streaming.HasAnimationLoaded("GRAFFITI")
goto_if_false @SWEET1_4000
wait 0
goto @SWEET1_3966

:SWEET1_4000
Audio.LoadMissionAudio(37444, 1)
Audio.LoadMissionAudio(37416, 2)
if 
  Char.IsInAnyCar($scplayer)
goto_if_false @SWEET1_4061
Char.WarpFromCarToCoord($scplayer, 2094.7, -1652.05, 12.65)
goto @SWEET1_4081

:SWEET1_4061
Char.SetCoordinates($scplayer, 2094.7, -1652.05, 12.65)

:SWEET1_4081
Char.SetHeading($scplayer, 302.0)
Char.ClearTasks($scplayer)
Task.GoStraightToCoord($scplayer, 2099.12, -1651.26, 12.63, MoveState.Walk, 20000)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_4228
if 
  Char.IsInAnyCar($sweet)
goto_if_false @SWEET1_4180
Char.WarpFromCarToCoord($sweet, 2095.8, -1649.86, 12.7)
goto @SWEET1_4200

:SWEET1_4180
Char.SetCoordinates($sweet, 2095.8, -1649.86, 12.7)

:SWEET1_4200
Char.SetHeading($sweet, 277.0)
Char.ClearTasks($sweet)
Char.PerformSequence($sweet, 66@)
Sequence.Clear(66@)

:SWEET1_4228
Camera.SetFixedPosition(2095.531, -1659.485, 13.3156, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2095.742, -1658.519, 13.4672, SwitchType.JumpCut)
World.ClearArea(1, 2094.2, -1652.05, 12.65, 10.0)
wait 500
Camera.DoFade(1, 500)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_4347
Char.ClearLookAt($scplayer)
Task.LookAtChar($scplayer, $sweet, 4500)

:SWEET1_4347
36@ = 0
skip_cutscene_start_internal @SWEET1_5959
wait 2000
Camera.SetFixedPosition(2102.11, -1647.672, 13.1493, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2101.369, -1648.315, 13.3438, SwitchType.JumpCut)

:SWEET1_4417
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_4521
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_4475
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_4475
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_4514
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_4514
goto @SWEET1_4417

:SWEET1_4521
Audio.PlayMissionAudio(MissionAudioSlot.Slot2)
Text.PrintNow('SWE1_AR', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_AR', 10000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_4565
Char.StartFacialTalk($sweet, 3000)

:SWEET1_4565
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_4669
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_4623
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_4623
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_4662
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_4662
goto @SWEET1_4565

:SWEET1_4669
Text.ClearPrints
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_4692
Char.StopFacialTalk($sweet)

:SWEET1_4692
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_4716
64@ = Char.GetSequenceProgress($sweet)

:SWEET1_4716
if 
  64@ <> 2
goto_if_false @SWEET1_4872
wait 0
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_4779
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_4779
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_4818
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_4818
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_4857
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_4857
64@ = Char.GetSequenceProgress($sweet)
goto @SWEET1_4716

:SWEET1_4872
Camera.ResetNewScriptables
Camera.PersistTrack(True)
Camera.PersistPos(True)
Camera.SetVectorMove(2097.269, -1648.215, 14.4973, 2098.319, -1650.517, 14.3662, 10000, True)
Camera.SetVectorTrack(2101.626, -1649.577, 13.7631, 2101.89, -1647.925, 13.7316, 10000, True)
Text.PrintHelpForever('SWE1_D')
58@ = 1
TIMERA = 0

:SWEET1_4981
if 
  $tag_percentage <> 100
goto_if_false @SWEET1_5226
wait 0
$tag_percentage = World.GetPercentageTaggedInArea(97@, 98@, 99@, 96@)
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_5059
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_5059
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_5098
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_5098
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_5139
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_5139
if 
  58@ == 1
goto_if_false @SWEET1_5219
if 
  TIMERA > 5000
goto_if_false @SWEET1_5208
Text.PrintHelp('SWE1_F')
TIMERA = 0
58@ = 2
goto @SWEET1_5219

:SWEET1_5208
Text.PrintHelpForever('SWE1_D')

:SWEET1_5219
goto @SWEET1_4981

:SWEET1_5226
wait 1000
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_5315
Char.SetHeading($sweet, 280.0)
Task.PlayAnim($sweet, "GRAFFITI_CHKOUT", "GRAFFITI", 4.0, False, False, False, False, -1)
77@ = Char.GetScriptTaskStatus($sweet, 1541)

:SWEET1_5315
if 
  not is_int_lvar_equal_to_constant 77@ == 7
goto_if_false @SWEET1_5554
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_5376
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_5376
77@ = Char.GetScriptTaskStatus($sweet, 1541)
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_5426
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_5426
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_5467
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_5467
if 
  58@ == 1
goto_if_false @SWEET1_5547
if 
  TIMERA > 5000
goto_if_false @SWEET1_5536
Text.PrintHelp('SWE1_F')
TIMERA = 0
58@ = 2
goto @SWEET1_5547

:SWEET1_5536
Text.PrintHelpForever('SWE1_D')

:SWEET1_5547
goto @SWEET1_5315

:SWEET1_5554
Camera.ResetNewScriptables
Text.ClearHelp
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_5599
Task.GoStraightToCoord($sweet, 2099.1, -1650.02, 12.57, MoveState.Walk, 20000)

:SWEET1_5599
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_5647
Char.ClearLookAt($sweet)
Char.ClearLookAt($scplayer)
Task.LookAtChar($scplayer, $sweet, 4500)
Task.LookAtChar($sweet, $scplayer, 4500)

:SWEET1_5647
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_5751
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_5705
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_5705
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_5744
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_5744
goto @SWEET1_5647

:SWEET1_5751
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
Text.PrintNow('SWE1_CA', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_CA', 10000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_5795
Char.StartFacialTalk($sweet, 3000)

:SWEET1_5795
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_5899
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_5853
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_5853
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_5892
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_5892
goto @SWEET1_5795

:SWEET1_5899
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_5920
Char.StopFacialTalk($sweet)

:SWEET1_5920
Text.ClearPrints
Task.GoStraightToCoord($scplayer, 2097.56, -1651.36, 12.71, MoveState.Walk, 20000)
wait 500
36@ = 1

:SWEET1_5959
skip_cutscene_end 
Text.ClearPrints
Audio.ClearMissionAudio(MissionAudioSlot.Slot1)
Audio.ClearMissionAudio(MissionAudioSlot.Slot2)
Audio.LoadMissionAudio(37445, 2)
Camera.ResetNewScriptables
if 
  36@ == 0
goto_if_false @SWEET1_6174
Camera.DoFade(0, 500)

:SWEET1_6007
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_6031
wait 0
goto @SWEET1_6007

:SWEET1_6031
World.SetTagStatusInArea(96@, 97@, 98@, 99@, 1)
Char.SetCoordinates($scplayer, 2097.56, -1651.36, 12.71)
Char.SetHeading($scplayer, 99.0)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_6128
Char.ClearTasksImmediately($sweet)
Char.SetCoordinates($sweet, 2099.1, -1650.02, 12.57)
Char.SetHeading($sweet, 99.0)

:SWEET1_6128
Camera.SetBehindPlayer
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut
Camera.DoFade(1, 700)

:SWEET1_6150
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_6174
wait 0
goto @SWEET1_6150

:SWEET1_6174
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_6219
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_6219
Task.EnterCarAsPassenger($sweet, $sweet_car, 0, 15000)

:SWEET1_6219
Blip.Remove(56@)
Blip.Remove(62@)
Char.ClearLookAt($scplayer)
Camera.SetBehindPlayer
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut
Blip.Remove(62@)
42@ = Blip.AddForCoord(2068.31, -1654.0, 14.3)
Blip.ChangeColor(42@, BlipColor.Green)
43@ = Blip.AddForCoord(2047.31, -1634.65, 13.8)
Blip.ChangeColor(43@, BlipColor.Green)
Streaming.RemoveAnimation("GRAFFITI")
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_6343
Car.LockDoors($sweet_car, CarLock.LockoutPlayerOnly)

:SWEET1_6343
69@ = 1
$tag_percentage = World.GetPercentageTaggedInArea(89@, 90@, 91@, 88@)
World.SetTagStatusInArea(88@, 89@, 90@, 91@, 0)
65@ = 0

:SWEET1_6390
if 
  $tag_percentage <> 100
goto_if_false @SWEET1_6963
wait 0
if 
  65@ == 0
goto_if_false @SWEET1_6479
if 
  Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_6472
Audio.PlayMissionAudio(MissionAudioSlot.Slot2)
Text.PrintNow('SWE1_CB', 2500, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_CB', 2500, 1, $NETWORK_PLAYER[$temp_int])
    end
end
65@ = 1

:SWEET1_6472
goto @SWEET1_6535

:SWEET1_6479
if 
  65@ == 1
goto_if_false @SWEET1_6535
if 
  Audio.HasMissionAudioFinished(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_6535
Text.PrintNow('SWE1_X', 6000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_X', 6000, 1, $NETWORK_PLAYER[$temp_int])
    end
end
65@ = 2

:SWEET1_6535
$tag_percentage = World.GetPercentageTaggedInArea(89@, 90@, 91@, 88@)
59@ = World.GetPercentageTaggedInArea(-1654.589, 2063.544, -1650.013, 2068.876)
60@ = World.GetPercentageTaggedInArea(-1633.986, 2047.145, -1638.957, 2044.836)
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_6641
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_6641
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_6680
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_6680
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_6721
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_6721
if or
  Char.LocateOnFoot2D($scplayer, 0, 2043.68, -1635.73, 4.0, 4.0)
  Char.LocateOnFoot2D($scplayer, 0, 2067.99, -1652.61, 4.0, 4.0)
goto_if_false @SWEET1_6910
if 
  58@ == 0
goto_if_false @SWEET1_6848
if 
  TIMERA > 1000
goto_if_false @SWEET1_6848
Text.PrintHelp('SWE1_D')
TIMERA = 0
58@ = 1

:SWEET1_6848
if 
  58@ == 1
goto_if_false @SWEET1_6910
if 
  TIMERA > 5000
goto_if_false @SWEET1_6910
Text.PrintHelp('SWE1_F')
TIMERA = 0
58@ = 2

:SWEET1_6910
if 
  59@ == 100
goto_if_false @SWEET1_6933
Blip.Remove(42@)

:SWEET1_6933
if 
  60@ == 100
goto_if_false @SWEET1_6956
Blip.Remove(43@)

:SWEET1_6956
goto @SWEET1_6390

:SWEET1_6963
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_7011
Blip.Remove(42@)
Blip.Remove(43@)
56@ = Blip.AddForCar($sweet_car)
Blip.SetAsFriendly(56@, True)
Car.LockDoors($sweet_car, CarLock.Unlocked)

:SWEET1_7011
Text.PrintNow('SWE1_S', 6000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if $temp_int == 2 // the 3rd player
        then
            if not Car.IsDead($ryder_car)
            then
                Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $ryder_car, true, BlipDisplay.Both, BlipColor.Purple, 3)
            end
        else
            Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $sweet_car, true, BlipDisplay.Both, BlipColor.Purple, 3)
        end
        Coop.PrintNowForNetworkPlayer('SWE1_S', 6000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7066
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7066
Audio.LoadMissionAudio(37417, 1)

:SWEET1_7075
206@ = 0
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if $temp_int == 2 // the 3rd player
        then
            if
                not Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
            then
                206@ = 1
            end
        else
            if
                not Char.IsInCar($NETWORK_PLAYER[$temp_int], $sweet_car)
            then
                206@ = 1
            end
        end
    end
end

if or
  not Char.IsInCar($scplayer, $sweet_car)
  206@ <> 0
goto_if_false @SWEET1_7265
wait 0
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_7139
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_7139
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7178
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7178
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_7217
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_7217
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_7258
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_7258
goto @SWEET1_7075

:SWEET1_7265
45@ = 0
58@ = 0
TIMERA = 0
$blob_flag = 1
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if 
            $temp_int == 2 // the 3rd player
        then
            if not Car.IsDead($ryder_car)
            then
                Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $ryder_car)
            end
        else
            Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], $sweet_car)
        end
    end
end
Blip.Remove(56@)
41@ = Blip.AddForCoord(2338.74, -1500.31, 22.83)

:SWEET1_7318
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_7463
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_7376
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_7376
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7415
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7415
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_7456
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_7456
goto @SWEET1_7318

:SWEET1_7463
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
Text.PrintNow('SWE1_AS', 3000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_AS', 3000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

:SWEET1_7483
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_7628
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_7541
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_7541
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7580
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7580
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_7621
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_7621
goto @SWEET1_7483

:SWEET1_7628
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7667
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7667
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_7706
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_7706
TIMERA = 0

:SWEET1_7713
206@ = 0
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if
            not Char.LocateAnyMeans3D($NETWORK_PLAYER[$temp_int], 0, 2338.74, -1500.31, 22.83, 10.0, 10.0, 10.0)
        then
            206@ = 1
        end
    end
end

if or
  not Car.Locate3D($sweet_car, $blob_flag, 2338.74, -1500.31, 22.83, 4.0, 4.0, 4.0)
  not Char.IsSittingInCar($scplayer, $sweet_car)
  not Car.IsOnAllWheels($sweet_car)
  206@ <> 0
goto_if_false @SWEET1_8342
wait 0
if 
  39@ == 0
goto_if_false @SWEET1_7834
if 
  TIMERA > 10000
goto_if_false @SWEET1_7834
Text.PrintHelp('SWE1_Z1')
39@ = 1

:SWEET1_7834
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_7873
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_7873
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_7914
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_7914
if 
    Car.IsDead($sweet_car)
then
    Text.PrintNow('SWE1_Q', 10000, 1)
    goto @SWEET1_14575 // mission_sweet1_failed
else
    /// === LOCAL PLAYER
    if 
        Char.IsInCar($scplayer, $sweet_car)
    then
        if 
            34@ == 0
        then
            Blip.Remove(41@)
            Blip.Remove(56@)
            41@ = Blip.AddForCoord(2338.74, -1500.31, 22.83)
            Text.PrintNow('HOOD3_B', 5000, 1) // Go into enemy territory and spray over the rival gang tags
            34@ = 1
            $blob_flag = 1
        end
    else
        if 
          34@ == 1
        then
            Blip.Remove(56@)
            Blip.Remove(41@)
            56@ = Blip.AddForCar($sweet_car)
            Blip.SetAsFriendly(56@, True)
            gosub @SWEET1_15166 // get_back_in_the_car
            Text.PrintNow('SWE1_S', 6000, 1) //~s~Get back in ~b~Sweets car!
            Char.ShutUpForScriptedSpeech($scplayer, False)
            Char.StopFacialTalk($scplayer)
            $blob_flag = 0
            34@ = 0
        end
    end
    
    /// === NETWORK PLAYERS
    
    for $temp_int = 0 to 2
        if 
            Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
        then
            if 
                $temp_int == 2 // the 3rd player
            then
                if Car.IsDead($ryder_car)
                then
                    203@ = -1
                else
                    008B: 203@ = $ryder_car
                end

            else
                008B: 203@ = $sweet_car
            end

            $temp_integer_1 = false
            if and
                203@ == -1
                Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
            then
                $temp_integer_1 = true
            end

            if and
                $temp_integer_1 == false
                Char.IsInCar($NETWORK_PLAYER[$temp_int], 203@)
            then
                $temp_integer_1 = true
            end

            if 
                $temp_integer_1 == true 
            then
                if 
                    200@($temp_int, 3i) == 0 // sweet_car_blip_removed
                then
                    if 203@ <> -1
                    then
                        Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@)
                    end
                    
                    Coop.UpdateCheckpointForNetworkPlayer(2338.74, -1500.31, 22.83, 4.0, 4.0, 4.0, $NETWORK_PLAYER[$temp_int])
                    Coop.PrintNowForNetworkPlayer('HOOD3_B', 5000, 1, $NETWORK_PLAYER[$temp_int]) // ~s~Drive with Sweet to ~y~Idlewood~s~.
                    200@($temp_int, 3i) = 1 // sweet_car_blip_removed
                end
            else
                if 
                    200@($temp_int, 3i) == 1 // sweet_car_blip_removed
                then
                    if 203@ <> -1
                    then
                        Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@, true, BlipDisplay.Both, BlipColor.Purple, 3)
                    end
                    
                    Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
                    Coop.PrintNowForNetworkPlayer('SWE1_S', 5000, 1, $NETWORK_PLAYER[$temp_int]) //~s~Get back in ~b~Sweets car!
                    200@($temp_int, 3i) = 0 // sweet_car_blip_removed
                end
            end
        end
    end
end

:SWEET1_8156
if 
  58@ == 0
goto_if_false @SWEET1_8216
if 
  TIMERA > 3000
goto_if_false @SWEET1_8216
Text.PrintNow('HOOD3_B', 5000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('HOOD3_B', 5000, 1, $NETWORK_PLAYER[$temp_int])
    end
end
58@ = 1

:SWEET1_8216
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_8255
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_8255
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_8296
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_8296
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_8335
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_8335
goto @SWEET1_7713

:SWEET1_8342
Audio.LoadMissionAudio(37420, 1)
Blip.Remove(56@)
Blip.Remove(41@)
43@ = Blip.AddForCoord(2396.21, -1469.8, 24.9)
Blip.ChangeColor(43@, BlipColor.Green)
44@ = Blip.AddForCoord(2353.22, -1506.54, 24.7)
Blip.ChangeColor(44@, BlipColor.Green)
Hud.SwitchWidescreen(True)
Camera.SetFixedPosition(2329.675, -1499.911, 25.8505, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2330.653, -1499.926, 25.644, SwitchType.JumpCut)
Player.SetControl($player1, False)

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if
            Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
        then
            wait 100
            Task.LeaveAnyCar($NETWORK_PLAYER[$temp_int])
        end
    end
end

wait 100
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_8524
if 
  Char.IsInCar($scplayer, $sweet_car)
goto_if_false @SWEET1_8524
Task.LeaveCar($scplayer, $sweet_car)

:SWEET1_8524
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_8628
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_8582
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_8582
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_8621
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_8621
goto @SWEET1_8524

:SWEET1_8628
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
Text.PrintNow('SWE1_AV', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_AV', 10000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

:SWEET1_8648
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_8752
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_8706
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_8706
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_8745
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_8745
goto @SWEET1_8648

:SWEET1_8752
if 
  Char.IsInCar($scplayer, $sweet_car)
goto_if_false @SWEET1_8814
wait 0
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_8807
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_8807

:SWEET1_8807
goto @SWEET1_8752

:SWEET1_8814
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_8868
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_8868
Car.LockDoors($sweet_car, CarLock.LockoutPlayerOnly)
Task.CarDriveWander($sweet, $sweet_car, 20.0, DrivingMode.AvoidCars)

:SWEET1_8868
58@ = 0
39@ = 0
TIMERA = 0
World.SetTagStatusInArea(92@, 93@, 94@, 95@, 0)
$tag_percentage = World.GetPercentageTaggedInArea(93@, 94@, 95@, 92@)
wait 1000
Camera.SetBehindPlayer
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut

:SWEET1_8942
if 
  $tag_percentage <> 100
goto_if_false @SWEET1_10388
wait 0
if 
  58@ == 0
goto_if_false @SWEET1_9042
if 
  TIMERA > 2500
goto_if_false @SWEET1_9042
Text.PrintNow('SWE1_M', 6000, 1)
Audio.LoadMissionAudio(37423, 1)
Audio.LoadMissionAudio(37427, 2)
58@ = 1

:SWEET1_9042
$tag_percentage = World.GetPercentageTaggedInArea(93@, 94@, 95@, 92@)
59@ = World.GetPercentageTaggedInArea(-1469.8, 2387.95, -1463.55, 2396.21)
60@ = World.GetPercentageTaggedInArea(-1506.54, 2354.88, -1511.58, 2353.22)
if 
  61@ == 0
goto_if_false @SWEET1_9343
if 
  Char.LocateAnyMeans2D($scplayer, 0, 2395.61, -1470.52, 50.0, 50.0)
goto_if_false @SWEET1_9336
54@ = Char.Create(24, 102, 2400.45, -1470.39, 22.97)
Char.SetHeading(54@, 82.4)
55@ = Char.Create(24, 103, 2396.48, -1469.9, 22.99)
Char.SetHeading(55@, 262.64)
Task.ChatWithChar(55@, 54@, False, 1)
Task.ChatWithChar(54@, 55@, True, 1)
47@ = Sequence.Open()
Task.GotoCharOffset(-1, $scplayer, -1, 0.5, 90.0)
Sequence.SetToRepeat(47@, True)
Sequence.Close(47@)
37@ = Sequence.Open()
Task.GotoCharOffset(-1, $scplayer, -1, 0.5, 270.0)
Sequence.SetToRepeat(37@, True)
Sequence.Close(37@)
61@ = 1

:SWEET1_9336
goto @SWEET1_10009

:SWEET1_9343
if 
    46@ == 0
then
    if 
        Char.LocateAnyMeans2D($scplayer, 0, 2395.61, -1470.52, 20.0, 17.0)
    then
        if 
            not Char.IsDead(54@)
        then
            if 
                not Char.IsDead(55@)
            then
                Hud.SwitchWidescreen(True)
                Player.SetControl($player1, False)
                Camera.SetFixedPosition(2400.384, -1472.208, 23.9349, 0.0, 0.0, 0.0)
                Camera.PointAtPoint(2399.49, -1471.763, 23.988, SwitchType.JumpCut)
                Text.PrintHelp('SWE1_H')
                Coop.TeleportPlayersToHostSafely($NETWORK_PLAYER[0], $NETWORK_PLAYER[1], $NETWORK_PLAYER[2])
                wait 500
                skip_cutscene_start_internal @SWEET1_9521
                wait 6500
                :SWEET1_9521
                skip_cutscene_end 
                Hud.SwitchWidescreen(False)
                Player.SetControl($player1, True)
                Camera.RestoreJumpcut
            end
        end
        46@ = 1
    end
end

:SWEET1_9543
if 
  46@ == 1
goto_if_false @SWEET1_9789
if 
  39@ == 0
goto_if_false @SWEET1_9616
if 
  TIMERA > 2000
goto_if_false @SWEET1_9616
Text.PrintHelp('SWE1_I')
39@ = 1

:SWEET1_9616
if 
  Char.LocateAnyMeans2D($scplayer, 0, 2395.61, -1470.52, 5.0, 5.0)
goto_if_false @SWEET1_9789
if 
  not Char.IsDead(54@)
goto_if_false @SWEET1_9697
Char.ShutUpForScriptedSpeech(54@, True)
Task.StandStill(54@, 0)
Char.PerformSequence(54@, 47@)
Sequence.Clear(47@)

:SWEET1_9697
if 
  not Char.IsDead(55@)
goto_if_false @SWEET1_9782
Char.ShutUpForScriptedSpeech(55@, True)
Task.StandStill(55@, 0)
Char.PerformSequence(55@, 37@)
Sequence.Clear(37@)
if 
  Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_9775
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
Text.PrintNow('SWE1_BA', 2000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_BA', 2000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

:SWEET1_9775
TIMERA = 0

:SWEET1_9782
46@ = 2

:SWEET1_9789
if 
  46@ == 2
goto_if_false @SWEET1_9923
if or
  59@ == 100
  TIMERA > 5000
goto_if_false @SWEET1_9923
if 
  not Char.IsDead(54@)
goto_if_false @SWEET1_9857
Task.KillCharOnFoot(54@, $scplayer)

:SWEET1_9857
if 
  not Char.IsDead(55@)
goto_if_false @SWEET1_9916
Task.KillCharOnFoot(55@, $scplayer)
if 
  Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_9916
Audio.PlayMissionAudio(MissionAudioSlot.Slot2)
Text.PrintNow('SWE1_BE', 2000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_BE', 2000, 1, $NETWORK_PLAYER[$temp_int])
    end
end

:SWEET1_9916
46@ = 3

:SWEET1_9923
if 
  46@ == 3
goto_if_false @SWEET1_10009
if 
  Audio.HasMissionAudioFinished(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_10009
if 
  not Char.IsDead(54@)
goto_if_false @SWEET1_9979
Char.ShutUpForScriptedSpeech(54@, False)

:SWEET1_9979
if 
  not Char.IsDead(55@)
goto_if_false @SWEET1_10002
Char.ShutUpForScriptedSpeech(55@, False)

:SWEET1_10002
46@ = 4

:SWEET1_10009
if 
  59@ == 100
goto_if_false @SWEET1_10032
Blip.Remove(43@)

:SWEET1_10032
if 
  60@ == 100
goto_if_false @SWEET1_10055
Blip.Remove(44@)

:SWEET1_10055
if and
  Char.LocateOnFoot2D($scplayer, 0, 2353.3, -1508.18, 3.0, 3.0)
  35@ == 0
goto_if_false @SWEET1_10125
Text.PrintHelp('SWE1_G')
TIMERA = 0
35@ = 1

:SWEET1_10125
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_10164
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_10164
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_10203
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_10203
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_10244
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_10244
if 
  38@ == 0
goto_if_false @SWEET1_10381
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_10381
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_10381
if and
  not Char.LocateAnyMeansCar3D($scplayer, $sweet_car, 30.0, 30.0, 10.0, False)
  not Car.IsOnScreen($sweet_car)
goto_if_false @SWEET1_10381
Char.ClearTasks($sweet)
Car.SetCoordinates($sweet_car, 2487.172, -1666.301, -100.3438)
Car.FreezePositionAndDontLoadCollision($sweet_car, True)
Char.FreezePositionAndDontLoadCollision($sweet, True)
38@ = 1

:SWEET1_10381
goto @SWEET1_8942

:SWEET1_10388
Blip.Remove(43@)
Blip.Remove(44@)
Blip.Remove(41@)
41@ = Blip.AddForCoord(2374.0, -1534.1, 23.0)
Text.PrintNow('SWE1_Z', 5000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_Z', 5000, 1, $NETWORK_PLAYER[$temp_int])
    end
end
World.SetTagStatusInArea(84@, 85@, 86@, 87@, 0)
$tag_percentage = World.GetPercentageTaggedInArea(85@, 86@, 87@, 84@)
Streaming.RequestCarRecording(207)

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        200@($temp_int, 3i) = 0
        Coop.UpdateCheckpointForNetworkPlayer(2374.0, -1534.1, 23.0, 1.4, 1.4, 2.0, $NETWORK_PLAYER[$temp_int])     
    end
end

:SWEET1_10477
if 
  $tag_percentage <> 100
goto_if_false @SWEET1_11272
wait 0
if 
  58@ == 0
goto_if_false @SWEET1_10559
if 
  TIMERA > 2500
goto_if_false @SWEET1_10559
Text.PrintNow('SWE1_M', 6000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_M', 6000, 1, $NETWORK_PLAYER[$temp_int])
    end
end
58@ = 1

:SWEET1_10559
$tag_percentage = World.GetPercentageTaggedInArea(85@, 86@, 87@, 84@)
if 
  $tag_percentage == 100
goto_if_false @SWEET1_10599
Blip.Remove(42@)

:SWEET1_10599
for $temp_int = 0 to 2
    if 
        200@($temp_int, 3i) == 0
    then
        if 
            Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
        then
            if 
                Char.LocateOnFoot3D($NETWORK_PLAYER[$temp_int], false, 2374.0, -1534.1, 23.0, 1.4, 1.4, 2.0)
            then
                Coop.PrintHelpForNetworkPlayer('JUMPH1', $NETWORK_PLAYER[$temp_int])
                Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
                200@($temp_int, 3i) = 1    
            end       
        end
    end
end

if 
    49@ == 0
then
    if 
        Char.LocateOnFoot3D($scplayer, 1, 2374.0, -1534.1, 23.0, 1.4, 1.4, 2.0)
    then
        Text.PrintHelp('JUMPH1')
        Blip.Remove(41@)
        Blip.Remove(42@)
        42@ = Blip.AddForCoord(2395.43, -1551.69, 26.98)
        Blip.ChangeColor(42@, BlipColor.Green)
        49@ = 1
    end
end
:SWEET1_10720
if and
  Char.LocateOnFoot2D($scplayer, 0, 2352.3, -1552.1, 3.0, 3.0)
  49@ == 0
goto_if_false @SWEET1_10783
Text.PrintHelp('JUMPH1')
49@ = 1

:SWEET1_10783
if and
  Char.LocateOnFoot2D($scplayer, 0, 2420.7, -1572.1, 3.0, 3.0)
  49@ == 0
goto_if_false @SWEET1_10846
Text.PrintHelp('JUMPH1')
49@ = 1

:SWEET1_10846
if and
  Char.LocateOnFoot2D($scplayer, 0, 2373.5, -1547.2, 3.0, 3.0)
  50@ == 0
goto_if_false @SWEET1_10909
Text.PrintHelp('RADAR5')
50@ = 1

:SWEET1_10909
if and
  Char.LocateOnFoot2D($scplayer, 0, 2378.755, -1555.89, 3.0, 3.0)
  53@ == 0
goto_if_false @SWEET1_11009
Text.PrintHelp('JUMPH2')
Blip.Remove(41@)
Blip.Remove(42@)
42@ = Blip.AddForCoord(2395.43, -1551.69, 26.98)
Blip.ChangeColor(42@, BlipColor.Green)
53@ = 1

:SWEET1_11009
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_11050
Text.PrintNow('SWE1SPF', 10000, 1)
goto @SWEET1_14575

:SWEET1_11050
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_11089
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_11089
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_11128
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_11128
if 
  38@ == 0
goto_if_false @SWEET1_11265
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_11265
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11265
if or
  not Char.LocateAnyMeansCar3D($scplayer, $sweet_car, 100.0, 100.0, 10.0, False)
  not Car.IsOnScreen($sweet_car)
goto_if_false @SWEET1_11265
Char.ClearTasks($sweet)
Car.SetCoordinates($sweet_car, 2487.172, -1666.301, -100.3438)
Car.FreezePositionAndDontLoadCollision($sweet_car, True)
Char.FreezePositionAndDontLoadCollision($sweet, True)
38@ = 1

:SWEET1_11265
goto @SWEET1_10477

:SWEET1_11272
Blip.Remove(42@)
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11439
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_11439
if 
  38@ == 1
goto_if_false @SWEET1_11341
Car.FreezePositionAndDontLoadCollision($sweet_car, False)
Char.FreezePositionAndDontLoadCollision($sweet, False)

:SWEET1_11341
Car.SetCoordinates($sweet_car, 2337.86, -1467.21, 22.82)
Car.SetHeading($sweet_car, 180.0)
wait 100
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11439
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_11439
Char.ClearTasksImmediately($sweet)
Task.WarpCharIntoCarAsDriver($sweet, $sweet_car)
Char.SetCanBeShotInVehicle($sweet, False)
Blip.Remove(41@)
Car.LockDoors($sweet_car, CarLock.Unlocked)

:SWEET1_11439
if 
  not Streaming.HasCarRecordingBeenLoaded(207)
goto_if_false @SWEET1_11549
wait 0
Streaming.RequestCarRecording(207)
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_11503
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_11503
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_11542
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_11542
goto @SWEET1_11439

:SWEET1_11549
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11654
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_11654
if 
  Streaming.HasCarRecordingBeenLoaded(207)
goto_if_false @SWEET1_11654
Char.ClearTasksImmediately($sweet)
wait 0
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11646
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_11646
Task.WarpCharIntoCarAsDriver($sweet, $sweet_car)

:SWEET1_11646
Car.StartPlayback($sweet_car, 207)

:SWEET1_11654
wait 2000
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_11695
Blip.Remove(56@)
56@ = Blip.AddForCar($sweet_car)
Blip.SetAsFriendly(56@, True)

:SWEET1_11695
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
    end
end
Player.SetControl($player1, False)
Text.ClearHelp
World.ClearArea(1, 2378.323, -1526.153, 23.869, 50.0)
Camera.DoFade(0, 300)

:SWEET1_11735
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_11759
wait 0
goto @SWEET1_11735

:SWEET1_11759
Streaming.LoadSceneInDirection(2385.444, -1529.335, 24.0351, 82.7482)
Hud.SwitchWidescreen(True)
Camera.SetFixedPosition(2386.444, -1529.313, 24.0696, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2385.444, -1529.335, 24.0351, SwitchType.JumpCut)
Camera.DoFade(1, 300)
TIMERA = 0
Audio.LoadMissionAudio(37430, 1)

:SWEET1_11859
if 
  TIMERA <= 3500
goto_if_false @SWEET1_11967
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_11921
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_11921
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_11960
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_11960
goto @SWEET1_11859

:SWEET1_11967
Camera.SetFixedPosition(2386.444, -1529.313, 24.0696, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2385.444, -1529.335, 24.0351, SwitchType.JumpCut)
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_12042
Audio.ReportMissionAudioEventAtCar($sweet_car, 1147)

:SWEET1_12042
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_12146
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_12100
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_12100
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_12139
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_12139
goto @SWEET1_12042

:SWEET1_12146
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_12170
Audio.ReportMissionAudioEventAtCar($sweet_car, 1147)

:SWEET1_12170
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
Text.PrintNow('SWE1_BH', 10000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_BH', 10000, 1, $NETWORK_PLAYER[$temp_int]) // CARL, QUICK, GET IN!
    end
end
:SWEET1_12190
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_12294
wait 0
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_12248
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_12248
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_12287
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_12287
goto @SWEET1_12190

:SWEET1_12294
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_12341
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_12341
Char.ClearTasksImmediately($sweet)
Char.WarpIntoCarAsPassenger($sweet, $sweet_car, 0)

:SWEET1_12341
Camera.ResetNewScriptables
if 
  not Char.IsDead(54@)
goto_if_false @SWEET1_12369
Char.ClearTasks(54@)
Task.WanderStandard(54@)

:SWEET1_12369
if 
  not Char.IsDead(55@)
goto_if_false @SWEET1_12395
Char.ClearTasks(55@)
Task.WanderStandard(55@)

:SWEET1_12395
$blob_flag = 0
34@ = 0
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut
Text.PrintNow('SWE1_S', 6000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer('SWE1_S', 6000, 1, $NETWORK_PLAYER[$temp_int]) // //~s~Get back in ~b~Sweets car!
    end
end
Blip.Remove(56@)
Blip.Remove(41@)
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_12479
56@ = Blip.AddForCar($sweet_car)
Blip.SetAsFriendly(56@, True)

:SWEET1_12479
Audio.LoadMissionAudio(38607, 1)

:SWEET1_12488
206@ = 0
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        if
            not Char.LocateAnyMeans3D($NETWORK_PLAYER[$temp_int], 0, 2504.735, -1672.45, 12.3848, 10.0, 10.0, 10.0)
        then
            206@ = 1
        end
    end
end
if or
  not Car.Locate3D($sweet_car, $blob_flag, 2504.735, -1672.45, 12.3848, 4.0, 4.0, 4.0)
  not Char.IsSittingInCar($scplayer, $sweet_car)
  not Car.IsOnAllWheels($sweet_car)
  206@ <> 0
goto_if_false @SWEET1_13006
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_12593
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_12593
if 
    Car.IsDead($sweet_car)
then
    Text.PrintNow('SWE1_Q', 10000, 1)
    goto @SWEET1_14575 // mission_sweet1_failed
else

    /// === LOCAL PLAYER
    if 
        Char.IsInCar($scplayer, $sweet_car)
    then
        if 
            40@ == 0
        then
            if 
                Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
            then
                Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
                Text.PrintNow('SWEX_AH', 3000, 1)
                TIMERA = 0
                40@ = 1
            end
        end
        if 
            34@ == 0
        then
            Blip.Remove(41@)
            Blip.Remove(56@)
            41@ = Blip.AddForCoord(2504.735, -1672.45, 12.3848)
            if 
                TIMERA > 3000
            then
                Text.PrintNow('SWE1_B', 6000, 1)
                34@ = 1
            end
            $blob_flag = 1
        end
    else
        if 
            34@ == 1
        then
            Blip.Remove(56@)
            Blip.Remove(41@)
            56@ = Blip.AddForCar($sweet_car)
            Blip.SetAsFriendly(56@, True)
            gosub @SWEET1_15166 // get_back_in_the_car
            Text.PrintNow('SWE1_S', 6000, 1) //~s~Get back in ~b~Sweets car!
            Char.ShutUpForScriptedSpeech($scplayer, False)
            Char.StopFacialTalk($scplayer)
            $blob_flag = 0
            34@ = 0
        end
    end
    /// === NETWORK PLAYERS
    for $temp_int = 0 to 2
        if 
            Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
        then
            if 
                $temp_int == 2 // the 3rd player
            then
                if Car.IsDead($ryder_car)
                then
                    203@ = -1
                else
                    008B: 203@ = $ryder_car
                end

            else
                008B: 203@ = $sweet_car
            end

            $temp_integer_1 = false
            if and
                203@ == -1
                Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
            then
                $temp_integer_1 = true
            end

            if and
                $temp_integer_1 == false
                Char.IsInCar($NETWORK_PLAYER[$temp_int], 203@)
            then
                $temp_integer_1 = true
            end

            if 
                $temp_integer_1 == true 
            then
                if 
                    200@($temp_int, 3i) == 0
                then
                    Coop.UpdateCheckpointForNetworkPlayer(2504.735, -1672.45, 12.3848, 4.0, 4.0, 4.0, $NETWORK_PLAYER[$temp_int])
                    if 203@ <> -1
                    then
                        Coop.RemoveCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@)
                    end
                    Coop.PrintNowForNetworkPlayer('SWE1_B', 6000, 1, $NETWORK_PLAYER[$temp_int]) // Go back to Sweets gaff.
                    200@($temp_int, 3i) = 1
                end
            else
                if 
                    200@($temp_int, 3i) == 1
                then
                    Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
                    if 203@ <> -1
                    then
                        Coop.UpdateCarBlipForNetworkPlayer($NETWORK_PLAYER[$temp_int], 203@, true, BlipDisplay.Both, BlipColor.Purple, 3)
                    end
                    gosub @SWEET1_15166 // get_back_in_the_car
                    Coop.PrintNowForNetworkPlayer('SWE1_S', 6000, 1, $NETWORK_PLAYER[$temp_int]) //~s~Get back in ~b~Sweets car!
                    200@($temp_int, 3i) = 0
                end
            end
        end
    end
    
end

:SWEET1_12921
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_12960
Text.PrintNow('SWE1_P', 10000, 1)
goto @SWEET1_14575

:SWEET1_12960
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_12999
Text.PrintNow('SWE1_Q', 10000, 1)
goto @SWEET1_14575

:SWEET1_12999
goto @SWEET1_12488

:SWEET1_13006
Hud.SwitchWidescreen(True)
Player.SetControl($player1, False)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
        if
            Char.IsInAnyCar($NETWORK_PLAYER[$temp_int])
        then
            wait 100
            Task.LeaveAnyCar($NETWORK_PLAYER[$temp_int])
        end
    end
end

Camera.DoFade(0, 1000)

:SWEET1_13024
if 
  Camera.GetFadingStatus
goto_if_false @SWEET1_13048
wait 0
goto @SWEET1_13024

:SWEET1_13048
Streaming.RequestAnimation("GANGS")

:SWEET1_13057
if 
  not Streaming.HasAnimationLoaded("GANGS")
goto_if_false @SWEET1_13088
wait 0
goto @SWEET1_13057

:SWEET1_13088
Camera.SetNearClip(0.2)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13118
Char.HideWeaponForScriptedCutscene($sweet, True)

:SWEET1_13118
Char.SetCurrentWeapon($scplayer, WeaponType.Unarmed)
Char.HideWeaponForScriptedCutscene($scplayer, True)
Char.RemoveWeapon(41, $scplayer)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13165
Char.StopFacialTalk($sweet)
Char.StopFacialTalk($scplayer)

:SWEET1_13165
$sweet1_index = 0
$sweet1_audio_is_playing = 0
$sweet1_cutscene_flag = 0
$sweet1_chat_switch = 1
gosub @SWEET1_52
Camera.SetFixedPosition(2509.95, -1672.095, 13.7315, 0.0, 0.0, 0.0)
Camera.PointAtPoint(2510.891, -1672.419, 13.8204, SwitchType.JumpCut)
Camera.ResetNewScriptables
Camera.PersistTrack(True)
Camera.PersistPos(True)
Camera.SetVectorMove(2510.153, -1673.551, 14.2267, 2509.997, -1671.866, 13.9831, 18000, True)
Camera.SetVectorTrack(2510.967, -1672.995, 14.0633, 2510.885, -1672.317, 13.896, 18000, True)
Car.MarkAsNoLongerNeeded($sweet_car)
World.ClearArea(1, 2511.352, -1672.14, 12.4588, 1.0)
Char.ClearTasksImmediately($scplayer)
if 
  not Char.IsInAnyCar($scplayer)
goto_if_false @SWEET1_13412
Char.SetCoordinates($scplayer, 2511.352, -1672.14, 12.4588)
goto @SWEET1_13432

:SWEET1_13412
Char.WarpFromCarToCoord($scplayer, 2511.352, -1672.14, 12.4588)

:SWEET1_13432
Char.SetHeading($scplayer, 180.0)
World.ClearArea(1, 2511.352, -1673.14, 12.4588, 1.0)
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13560
Char.ClearTasksImmediately($sweet)
if 
  not Char.IsInAnyCar($sweet)
goto_if_false @SWEET1_13530
Char.SetCoordinates($sweet, 2511.352, -1673.14, 12.4588)
goto @SWEET1_13550

:SWEET1_13530
Char.WarpFromCarToCoord($sweet, 2511.352, -1673.14, 12.4588)

:SWEET1_13550
Char.SetHeading($sweet, 0.0)

:SWEET1_13560
Camera.DoFade(1, 1000)
wait 700
100@ = 0.0
$sweet1_cutscene_flag = 0

:SWEET1_13589
if 
  $sweet1_index <> 1
goto_if_false @SWEET1_13700
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_13693
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_13693
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13686
Char.ClearLookAt($scplayer)
Task.LookAtChar($scplayer, $sweet, 20000)

:SWEET1_13686
$sweet1_cutscene_flag = 1

:SWEET1_13693
goto @SWEET1_13589

:SWEET1_13700
$sweet1_cutscene_flag = 0

:SWEET1_13707
if 
  $sweet1_index <> 2
goto_if_false @SWEET1_13802
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_13795
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_13795
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13788

:SWEET1_13788
$sweet1_cutscene_flag = 1

:SWEET1_13795
goto @SWEET1_13707

:SWEET1_13802
$sweet1_cutscene_flag = 0

:SWEET1_13809
if 
  $sweet1_index <> 3
goto_if_false @SWEET1_13904
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_13897
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_13897
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_13890

:SWEET1_13890
$sweet1_cutscene_flag = 1

:SWEET1_13897
goto @SWEET1_13809

:SWEET1_13904
$sweet1_cutscene_flag = 0

:SWEET1_13911
if 
  $sweet1_index <> 4
goto_if_false @SWEET1_14043
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_14036
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_14036
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_14029
Task.PlayAnim($scplayer, "IDLE_CHAT", "PED", 4.0, True, False, False, False, 6000)

:SWEET1_14029
$sweet1_cutscene_flag = 1

:SWEET1_14036
goto @SWEET1_13911

:SWEET1_14043
$sweet1_cutscene_flag = 0

:SWEET1_14050
if 
  $sweet1_index <> 5
goto_if_false @SWEET1_14145
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_14138
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_14138
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_14131

:SWEET1_14131
$sweet1_cutscene_flag = 1

:SWEET1_14138
goto @SWEET1_14050

:SWEET1_14145
$sweet1_cutscene_flag = 0

:SWEET1_14152
if 
  $sweet1_index <> 6
goto_if_false @SWEET1_14337
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_14330
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_14330
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_14323
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_14323
Task.PlayAnim($sweet, "HNDSHKFA", "GANGS", 4.0, False, False, False, False, -1)
Task.PlayAnim($scplayer, "HNDSHKFA", "GANGS", 4.0, False, False, False, False, -1)

:SWEET1_14323
$sweet1_cutscene_flag = 1

:SWEET1_14330
goto @SWEET1_14152

:SWEET1_14337
77@ = Char.GetScriptTaskStatus($scplayer, 1541)

:SWEET1_14348
if 
  not is_int_lvar_equal_to_constant 77@ == 7
goto_if_false @SWEET1_14388
wait 0
77@ = Char.GetScriptTaskStatus($scplayer, 1541)
goto @SWEET1_14348

:SWEET1_14388
$sweet1_cutscene_flag = 0

:SWEET1_14395
if 
  $sweet1_index <> 7
goto_if_false @SWEET1_14531
wait 0
gosub @SWEET1_15632
if 
  $sweet1_cutscene_flag == 0
goto_if_false @SWEET1_14524
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_14524
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_14517
Char.ClearLookAt($scplayer)
Task.LookAtChar($scplayer, $sweet, 2000)
Task.GoStraightToCoord($sweet, 2517.397, -1677.352, 13.2548, MoveState.Walk, 20000)

:SWEET1_14517
$sweet1_cutscene_flag = 1

:SWEET1_14524
goto @SWEET1_14395

:SWEET1_14531
wait 1500
Char.ClearLookAt($scplayer)
Char.HideWeaponForScriptedCutscene($scplayer, False)
Camera.ResetNewScriptables
Char.Delete($sweet)
Hud.SwitchWidescreen(False)
Player.SetControl($player1, True)
Camera.RestoreJumpcut
goto @SWEET1_14682

:SWEET1_14575
Text.PrintBig('M_FAIL', 5000, TextStyle.Middle)
World.SetTagStatusInArea(88@, 89@, 90@, 91@, 0)
World.SetTagStatusInArea(92@, 93@, 94@, 95@, 0)
World.SetTagStatusInArea(84@, 85@, 86@, 87@, 0)
World.SetTagStatusInArea(96@, 97@, 98@, 99@, 0)
if 
  Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_14680
Char.RemoveWeapon(41, $scplayer)

:SWEET1_14680
return 

:SWEET1_14682
$flag_sweet_mission_counter += 1

for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.RemoveCheckpointForNetworkPlayer($NETWORK_PLAYER[$temp_int])
        
        if
            Char.HasGotWeapon($NETWORK_PLAYER[$temp_int], WeaponType.SprayCan)   
        then
            Char.RemoveWeapon(41, $NETWORK_PLAYER[$temp_int])
        end
        
        Char.GiveWeapon($NETWORK_PLAYER[$temp_int], WeaponType.SprayCan, 1000)
    end
end

if 
  Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_14731
Char.RemoveWeapon(41, $scplayer)
Char.GiveWeapon($scplayer, WeaponType.SprayCan, 1000)
goto @SWEET1_14741

:SWEET1_14731
Char.GiveWeapon($scplayer, WeaponType.SprayCan, 1000)

:SWEET1_14741
$bball_unlocked = 1
Pickup.Remove($spray_can_pickup)
$spray_can_pickup = Pickup.CreateWithAmmo(365, 15, 1000, 2492.505, -1700.825, 1017.8)
Stat.PlayerMadeProgress(1)
Stat.RegisterMissionPassed('SWEET_1')
Text.PrintWithNumberBig('M_PASSS', 200, 5000, TextStyle.Middle)
Stat.AwardPlayerMissionRespect(3)
Player.AddScore($player1, 200)
Player.ClearWantedLevel($player1)
Audio.PlayMissionPassedTune(1)
return 

:SWEET1_14838
Streaming.MarkModelAsNoLongerNeeded(365)
Streaming.MarkModelAsNoLongerNeeded(492)
Streaming.MarkModelAsNoLongerNeeded(102)
Streaming.MarkModelAsNoLongerNeeded(103)
Char.MarkAsNoLongerNeeded(54@)
Char.MarkAsNoLongerNeeded(55@)
Char.MarkAsNoLongerNeeded($sweet)
$timer_mobile_start = Clock.GetGameTimer()
CarGenerator.Switch($gen_car6, 101)
CarGenerator.Switch($gen_car7, 101)
Blip.Remove(41@)
Blip.Remove(42@)
Blip.Remove(43@)
Blip.Remove(44@)
Blip.Remove(56@)
Blip.Remove(62@)
Streaming.RemoveAnimation("GRAFFITI")
Streaming.RemoveAnimation("GANGS")
Char.RemoveElegantly($sweet)
Streaming.RemoveCarRecording(207)
Streaming.UnloadSpecialCharacter(1)
Streaming.UnloadSpecialCharacter(10)
if 
  not Car.IsDead($sweet_car)
goto_if_false @SWEET1_14975
Car.SetCanBurstTires($sweet_car, True)

:SWEET1_14975
Zone.SetGangStrength('IWD1', GangType.Ballas, 30)
Zone.SetGangStrength('IWD2', GangType.Ballas, 30)
Zone.SetGangStrength('IWD3A', GangType.Ballas, 30)
Zone.SetGangStrength('IWD3B', GangType.Ballas, 30)
Zone.SetGangStrength('IWD4', GangType.Ballas, 30)
Zone.SetGangStrength('IWD5', GangType.Ballas, 30)
Zone.SetGangStrength('ELS1A', GangType.Ballas, 30)
Zone.SetGangStrength('ELS1B', GangType.Ballas, 30)
Zone.SetGangStrength('ELS2', GangType.Ballas, 30)
Zone.SetGangStrength('ELS3A', GangType.Ballas, 30)
Zone.SetGangStrength('ELS3B', GangType.Ballas, 30)
Zone.SetGangStrength('ELS4', GangType.Ballas, 30)
$onmission = 0
Mission.Finish
return 

:SWEET1_15166
Audio.ClearMissionAudio(MissionAudioSlot.Slot2)
if 
  $get_in_counter_swee1 == 0
goto_if_false @SWEET1_15197
Audio.LoadMissionAudio(37434, 2)

:SWEET1_15197
if 
  $get_in_counter_swee1 == 1
goto_if_false @SWEET1_15224
Audio.LoadMissionAudio(38644, 2)

:SWEET1_15224
if 
  $get_in_counter_swee1 == 2
goto_if_false @SWEET1_15251
Audio.LoadMissionAudio(38641, 2)

:SWEET1_15251
if 
  $get_in_counter_swee1 == 3
goto_if_false @SWEET1_15278
Audio.LoadMissionAudio(37429, 2)

:SWEET1_15278
Char.ShutUpForScriptedSpeech($scplayer, False)
Char.StopFacialTalk($scplayer)
Audio.ClearMissionAudio(MissionAudioSlot.Slot1)

:SWEET1_15294
if 
  not Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_15376
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_15331
return 

:SWEET1_15331
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_15351
return 

:SWEET1_15351
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_15369
return 

:SWEET1_15369
goto @SWEET1_15294

:SWEET1_15376
Audio.PlayMissionAudio(MissionAudioSlot.Slot2)
if 
  $get_in_counter_swee1 == 0
goto_if_false @SWEET1_15414
Text.PrintNow('SWE1_BM', 3000, 1)

:SWEET1_15414
if 
  $get_in_counter_swee1 == 1
goto_if_false @SWEET1_15448
Text.PrintNow('SWEX_BS', 3000, 1)

:SWEET1_15448
if 
  $get_in_counter_swee1 == 2
goto_if_false @SWEET1_15482
Text.PrintNow('SWEX_BP', 3000, 1)

:SWEET1_15482
if 
  $get_in_counter_swee1 == 3
goto_if_false @SWEET1_15516
Text.PrintNow('SWE1_BG', 3000, 1)

:SWEET1_15516
if 
  not Audio.HasMissionAudioFinished(MissionAudioSlot.Slot2)
goto_if_false @SWEET1_15598
wait 0
if 
  Char.IsDead($sweet)
goto_if_false @SWEET1_15553
return 

:SWEET1_15553
if 
  not Char.HasGotWeapon($scplayer, WeaponType.SprayCan)
goto_if_false @SWEET1_15573
return 

:SWEET1_15573
if 
  Car.IsDead($sweet_car)
goto_if_false @SWEET1_15591
return 

:SWEET1_15591
goto @SWEET1_15516

:SWEET1_15598
$get_in_counter_swee1 += 1
if 
  $get_in_counter_swee1 > 3
goto_if_false @SWEET1_15630
$get_in_counter_swee1 = 0

:SWEET1_15630
return 

:SWEET1_15632
if or
  $sweet1_audio_is_playing == 0
  $sweet1_audio_is_playing == 1
goto_if_false @SWEET1_15702
if 
  is_int_lvar_greater_or_equal_to_int_var 48@ >= $sweet1_index
goto_if_false @SWEET1_15702
if 
  TIMERA > 200
goto_if_false @SWEET1_15702
gosub @SWEET1_15774

:SWEET1_15702
if 
  $sweet1_audio_is_playing == 2
goto_if_false @SWEET1_15772
if 
  Audio.HasMissionAudioFinished(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_15772
gosub @SWEET1_16013
$sweet1_audio_is_playing = 0
$sweet1_index += 1
$sweet1_cutscene_flag = 0
Text.ClearPrints
TIMERA = 0

:SWEET1_15772
return 

:SWEET1_15774
if 
  $sweet1_audio_is_playing == 0
goto_if_false @SWEET1_15810
Audio.LoadMissionAudio($sweet1_audio_chat($sweet1_index,8i), 1)
$sweet1_audio_is_playing = 1

:SWEET1_15810
if 
  $sweet1_audio_is_playing == 1
goto_if_false @SWEET1_15875
if 
  Audio.HasMissionAudioLoaded(MissionAudioSlot.Slot1)
goto_if_false @SWEET1_15875
Text.PrintNow($sweet1_chat($sweet1_index,8s), 4000, 1)
for $temp_int = 0 to 2
    if 
        Coop.IsNetworkPlayerActorValid($NETWORK_PLAYER[$temp_int])
    then
        Coop.PrintNowForNetworkPlayer($sweet1_chat($sweet1_index,8s), 4000, 1, $NETWORK_PLAYER[$temp_int])
    end
end
Audio.PlayMissionAudio(MissionAudioSlot.Slot1)
gosub @SWEET1_15877
$sweet1_audio_is_playing = 2

:SWEET1_15875
return 

:SWEET1_15877
if or
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37401
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37404
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37436
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37438
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37443
goto_if_false @SWEET1_15980
Char.ShutUpForScriptedSpeech($scplayer, True)
Char.StartFacialTalk($scplayer, 2000)
goto @SWEET1_16011

:SWEET1_15980
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_16011
Char.ShutUpForScriptedSpeech($sweet, True)
Char.StartFacialTalk($sweet, 2000)

:SWEET1_16011
return 

:SWEET1_16013
if or
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37401
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37404
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37436
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37438
  is_int_var_equal_to_constant $sweet1_audio_chat($sweet1_index,8i) == 37443
goto_if_false @SWEET1_16113
Char.ShutUpForScriptedSpeech($scplayer, False)
Char.StopFacialTalk($scplayer)
goto @SWEET1_16141

:SWEET1_16113
if 
  not Char.IsDead($sweet)
goto_if_false @SWEET1_16141
Char.ShutUpForScriptedSpeech($sweet, False)
Char.StopFacialTalk($sweet)

:SWEET1_16141
return 

